# Swaz Solutions Backend Configuration

# Server Configuration
PORT=3000
NODE_ENV=development

# CORS Configuration - Origin Whitelisting
# For multiple origins, use comma-separated values
# CORS_ALLOWED_ORIGINS takes precedence over CORS_ORIGIN if both are set
CORS_ALLOWED_ORIGINS=http://localhost:5173,http://localhost:3000
# Single origin (legacy support)
CORS_ORIGIN=http://localhost:5173

# Database
DB_PATH=./music.db

# Music Directory (DEPRECATED - use R2 for cloud storage)
# NOTE: This is only used as fallback. Music files are now served from Cloudflare R2.
MUSIC_DIR=../src/data/MusicFiles

# ============================================
# CLOUDFLARE R2 OBJECT STORAGE
# ============================================
# Cloudflare R2 is used for music file storage (S3-compatible API)
# Get credentials from: https://dash.cloudflare.com/?to=/:account/r2/api-tokens

# R2 Account ID (found in R2 dashboard or API endpoint URL)
# Format: https://{ACCOUNT_ID}.r2.cloudflarestorage.com
R2_ACCOUNT_ID=YOUR_R2_ACCOUNT_ID_HERE

# R2 Access Key ID (from API token creation)
# Create at: https://dash.cloudflare.com/?to=/:account/r2/api-tokens
R2_ACCESS_KEY_ID=YOUR_R2_ACCESS_KEY_ID_HERE

# R2 Secret Access Key (from API token creation - save immediately, cannot be retrieved again)
# Create at: https://dash.cloudflare.com/?to=/:account/r2/api-tokens
R2_SECRET_ACCESS_KEY=YOUR_R2_SECRET_ACCESS_KEY_HERE

# R2 Bucket Name (where music files are stored)
R2_BUCKET_NAME=YOUR_R2_BUCKET_NAME_HERE

# R2 S3-Compatible Endpoint
# Format: https://{ACCOUNT_ID}.r2.cloudflarestorage.com
R2_ENDPOINT=https://YOUR_R2_ACCOUNT_ID_HERE.r2.cloudflarestorage.com

# R2 Public URL (optional - if using custom domain for R2 bucket)
# If not set, uses R2_ENDPOINT/{BUCKET_NAME} format
# Example: https://music.yourdomain.com
# R2_PUBLIC_URL=

# R2 Region (optional - defaults to auto)
# Cloudflare R2 is global, but you can specify if needed
# R2_REGION=auto

# R2 Presigned URL Expiry (in seconds, default: 3600 = 1 hour)
# Only used if bucket is private and presigned URLs are needed
R2_PRESIGNED_URL_EXPIRY=3600

# Rate Limiting Configuration
# Standard Auth Rate Limiting (for refresh, logout, me endpoints)
AUTH_RATE_LIMIT_WINDOW_MS=900000       # 15 minutes in milliseconds
AUTH_RATE_LIMIT_MAX=30                  # 30 requests per window

# Strict Auth Rate Limiting (for login, register, google auth)
STRICT_AUTH_RATE_LIMIT_WINDOW_MS=900000  # 15 minutes in milliseconds
STRICT_AUTH_RATE_LIMIT_MAX=5             # 5 attempts per window (brute force protection)

# General API Rate Limiting
API_RATE_LIMIT_WINDOW_MS=60000          # 1 minute in milliseconds
API_RATE_LIMIT_MAX=100                   # 100 requests per window

# ============================================
# Data Encryption (AES-256-GCM)
# ============================================
# REQUIRED for production: Generate a secure 32+ character random key
# Example: openssl rand -base64 32
ENCRYPTION_KEY=your-secure-encryption-key-min-32-chars

# Email Service Configuration
# Choose one: 'gmail' or 'smtp'
EMAIL_SERVICE=smtp

# ============================================
# RECOMMENDED: Custom SMTP (Your Domain Email)
# ============================================
# Get these settings from your hosting provider (cPanel/Plesk)
EMAIL_SERVICE=smtp
EMAIL_HOST=mail.swazdatarecovery.com
EMAIL_PORT=587
EMAIL_SECURE=false
EMAIL_USER=contactus@swazdatarecovery.com
EMAIL_PASSWORD=your-email-password
EMAIL_FROM=contactus@swazdatarecovery.com
EMAIL_TO=contactus@swazdatarecovery.com

# ============================================
# Alternative: Gmail (For Testing Only)
# ============================================
# Create an App Password: https://myaccount.google.com/apppasswords
# EMAIL_SERVICE=gmail
# EMAIL_USER=your-email@gmail.com
# EMAIL_PASSWORD=your-16-digit-app-password
# EMAIL_FROM=your-email@gmail.com
# EMAIL_TO=contactus@swazdatarecovery.com
